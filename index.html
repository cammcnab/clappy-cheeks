<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<meta name="robots" content="noindex, nofollow">
		<meta name="googlebot" content="noindex, nofollow">
		<title>Clappy Cheeks!!</title>
		<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
		<style>
			:root {
				--tv-padding: min(3vw, 3vh);
				--tv-chin: min(12vw, 12vh);
				--bezel-radius: min(8vw, 8vh);
				--noise-texture: url('data:image/svg+xml,<svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="2.5" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noise)" opacity="0.08"/></svg>');
			}

			* {
				box-sizing: border-box;
				margin: 0;
				padding: 0;
			}

			html, body {
				width: 100%;
				height: 100%;
				overflow: hidden;
			}

			body {
				display: flex;
				justify-content: center;
				align-items: center;
				background-color: #000;
				font-family: 'Press Start 2P', cursive;
				-webkit-tap-highlight-color: transparent;
				touch-action: manipulation;
			}

			.tv-container {
				position: relative;
				width: 100%;
				height: 100%;
				display: flex;
				justify-content: center;
				align-items: center;
				overflow: hidden;
			}

			.monitor-frame {
				position: relative;
				width: 100%;
				height: 100%;
				background: #2a2a2a;
				box-shadow: 
					inset 0 0 2px rgba(255,255,255,0.1),
					0 5px 15px rgba(0,0,0,0.5);
				background-image: 
					var(--noise-texture),
					linear-gradient(180deg, 
						#2a2a2a 0%,
						#252525 20%,
						#2a2a2a 50%,
						#252525 80%,
						#222 100%
					);
			}

			/* Main screen bezel */
			.inner-bezel {
				position: absolute;
				top: var(--tv-padding);
				left: var(--tv-padding);
				right: var(--tv-padding);
				bottom: var(--tv-chin);
				background: #1a1a1a;
				border-radius: var(--bezel-radius);
				overflow: hidden;
				background-image: 
					var(--noise-texture),
					linear-gradient(45deg,
						#1a1a1a 0%,
						#202020 25%,
						#1a1a1a 50%,
						#151515 75%,
						#1a1a1a 100%
					);
				box-shadow:
					inset 0 0 2px rgba(255,255,255,0.05),
					inset 0 0 20px rgba(0,0,0,0.5);
			}

			/* Screen mask and container */
			.canvas-container {
				position: absolute;
				top: calc(var(--tv-padding) * 0.7);
				left: calc(var(--tv-padding) * 0.7);
				right: calc(var(--tv-padding) * 0.7);
				bottom: calc(var(--tv-padding) * 0.7);
				overflow: hidden;
				border-radius: calc(var(--bezel-radius) * 1.6);
				background: #000;
				box-shadow: 
					inset 0 2px 5px rgba(255,255,255,0.1),
					inset 0 0 20px rgba(0,0,0,0.9);
			}

			/* Game wrapper */
			.game-wrapper {
				position: relative;
				width: calc(100% + var(--tv-padding));
				height: calc(100% + var(--tv-padding));
				margin: calc(var(--tv-padding) * -0.5);
				overflow: hidden;
				border-radius: calc(var(--bezel-radius) * 1.6);
			}

			/* Game and effect canvases */
			#gameCanvas,
			#effectCanvas {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: #000;
				border-radius: calc(var(--bezel-radius) * 1.6);
			}

			#gameCanvas {
				image-rendering: pixelated;
				z-index: 1;
			}

			#effectCanvas {
				pointer-events: none;
				z-index: 2;
			}

			/* Control panel area */
			.control-panel {
				position: absolute;
				bottom: 0;
				left: 0;
				right: 0;
				height: calc(var(--tv-chin) * 0.7);
				background: linear-gradient(to bottom, #2a2a2a, #222);
				border-top: 1px solid #333;
				display: flex;
				align-items: center;
				padding: 0 var(--tv-padding);
				background-image: 
					var(--noise-texture),
					linear-gradient(180deg,
						#2a2a2a 0%,
						#252525 30%,
						#222 70%,
						#1a1a1a 100%
					);
				box-shadow:
					inset 0 1px 2px rgba(255,255,255,0.1),
					0 -1px 3px rgba(0,0,0,0.2);
			}

			/* Speaker grille */
			.speaker-grille {
				position: absolute;
				bottom: calc(var(--tv-padding) * 0.7);
				left: var(--tv-padding);
				width: calc(var(--tv-chin) * 1.2);
				height: calc(var(--tv-chin) * 0.5);
				background-image: 
					var(--noise-texture),
					repeating-linear-gradient(
						90deg,
						#222,
						#222 2px,
						#1a1a1a 2px,
						#1a1a1a 4px
					);
				border-radius: calc(var(--bezel-radius) * 0.15);
				border: 1px solid #333;
				box-shadow:
					inset 0 1px 3px rgba(0,0,0,0.3),
					0 1px 1px rgba(255,255,255,0.05);
			}

			/* Control buttons */
			.controls {
				position: absolute;
				bottom: calc(var(--tv-padding) * 0.7);
				right: var(--tv-padding);
				display: flex;
				gap: calc(var(--tv-padding) * 0.5);
			}

			.control-button {
				width: calc(var(--tv-chin) * 0.6);
				height: calc(var(--tv-chin) * 0.3);
				background: #1a1a1a;
				border: 1px solid #333;
				border-radius: calc(var(--bezel-radius) * 0.1);
				position: relative;
				background-image: 
					var(--noise-texture),
					linear-gradient(180deg,
						#1a1a1a 0%,
						#151515 40%,
						#111 100%
					);
				box-shadow:
					inset 0 1px 2px rgba(255,255,255,0.05),
					0 1px 2px rgba(0,0,0,0.2);
			}

			.control-button::after {
				content: '';
				position: absolute;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%);
				width: 80%;
				height: calc(var(--tv-padding) * 0.1);
				background: linear-gradient(to right,
					#222 0%,
					#333 50%,
					#222 100%
				);
			}

			/* Power LED with improved visibility */
			.power-led {
				position: absolute;
				bottom: calc(var(--tv-padding) * 1.2);
				left: calc(var(--tv-chin) * 1.5);
				width: calc(var(--tv-padding) * 0.4);
				height: calc(var(--tv-padding) * 0.4);
				background: #33ff33;
				border-radius: 50%;
				box-shadow: 
					0 0 4px #33ff33,
					0 0 6px #33ff33,
					inset 0 -1px 2px rgba(0,0,0,0.2);
				border: 1px solid rgba(51, 255, 51, 0.4);
				z-index: 1;
			}

			/* LED label */
			.power-led::after {
				content: 'POWER';
				position: absolute;
				top: calc(var(--tv-padding) * -0.7);
				left: 50%;
				transform: translateX(-50%);
				font-size: calc(var(--tv-padding) * 0.35);
				color: #666;
				white-space: nowrap;
			}

			@media (max-width: 768px) {
				:root {
					--tv-padding: min(3vw, 3vh);
					--tv-chin: min(15vw, 15vh);
					--bezel-radius: min(7vw, 7vh);
				}

				.inner-bezel {
					border-radius: calc(var(--bezel-radius) * 0.8);
				}

				.canvas-container,
				.game-wrapper,
				#gameCanvas,
				#effectCanvas {
					border-radius: calc(var(--bezel-radius) * 1.4);
				}

				.control-panel {
					height: calc(var(--tv-chin) * 0.6);
				}

				.speaker-grille {
					width: calc(var(--tv-chin) * 1.5);
					height: calc(var(--tv-chin) * 0.4);
				}

				.control-button {
					width: calc(var(--tv-chin) * 0.5);
					height: calc(var(--tv-chin) * 0.25);
				}

				.power-led {
					width: calc(var(--tv-padding) * 0.5);
					height: calc(var(--tv-padding) * 0.5);
				}

				.power-led::after {
					font-size: calc(var(--tv-padding) * 0.3);
				}
			}
		</style>
	</head>
	<body>
		<div class="tv-container">
			<div class="monitor-frame">
				<div class="inner-bezel">
					<div class="canvas-container">
						<div class="game-wrapper">
							<canvas id="gameCanvas"></canvas>
							<canvas id="effectCanvas"></canvas>
						</div>
					</div>
				</div>
				<div class="control-panel">
					<div class="speaker-grille"></div>
					<div class="power-led"></div>
					<div class="controls">
						<div class="control-button"></div>
						<div class="control-button"></div>
						<div class="control-button"></div>
					</div>
				</div>
			</div>
		</div>
		
		<!-- Error handling and debugging -->
		<script>
			console.log('Starting script initialization...');
			
			// Global error handler
			window.onerror = function(msg, url, lineNo, columnNo, error) {
				console.error('Global error:', {
					message: msg,
					url: url,
					line: lineNo,
					column: columnNo,
					error: error
				});
				return false;
			};
			
			// Unhandled promise rejection handler
			window.onunhandledrejection = function(event) {
				console.error('Unhandled promise rejection:', event.reason);
			};
			
			// DOM ready handler
			document.addEventListener('DOMContentLoaded', function() {
				console.log('DOM loaded, elements:', {
					gameCanvas: document.getElementById('gameCanvas'),
					effectCanvas: document.getElementById('effectCanvas'),
					wrapper: document.querySelector('.game-wrapper')
				});
			});
			
			// Load complete handler
			window.addEventListener('load', function() {
				console.log('Window load complete');
			});
		</script>
		
		<!-- Game scripts -->
		<script type="module" src="shaders.js"></script>
		<script type="module" src="game.js"></script>
	</body>
</html>
